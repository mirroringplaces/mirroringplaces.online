<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

  {{ hugo.Generator }}

	<title>{{ .Title }}</title>
	{{ with .Site.Params.description }}<meta name="description" content="{{ . }}">{{ end }}
	{{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }}

  {{ $sass := resources.Get "sass/style.scss" }}
  {{ $style := $sass | resources.ToCSS | resources.Minify | resources.Fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}" />

  {{ template "_internal/twitter_cards.html" . }}
  {{ template "_internal/opengraph.html" . }}

	{{ with .OutputFormats.Get "RSS" -}}
		{{ printf `<link rel="%s" type="%s" href="%s" title="%s">` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
	{{- end }}
</head>
<body class="{{ .Params.bodyClass }}">

	{{ partial "header" . }}

  <div class="container {{ .Params.containerClass }}">
      <header>
        <h1>
          <select class="languages">
          {{ range $.Site.Home.AllTranslations }}
            <option value="{{ .Permalink }}"{{ if (eq $.Site.LanguageCode .Language.LanguageCode) }} selected {{ end }}>{{ .Language.LanguageName }}</option>
          {{ end }}
          </select>
          <a href="/">Mirroring Places</a>
        </h1>
      </header>

    	{{ block "main" . }}{{ end }}

      <footer>
          <menu>
              {{ $currentPage := . }}
              {{ range .Site.Menus.nav }}
                {{ $atURL := absURL $currentPage.RelPermalink }}
                {{ $compURL := absURL .URL }}
                <li class="{{ .Pre }}"><a href="{{ .URL }}"{{ if (eq $atURL $compURL) }} class="active"{{ end }}>{{ .Name }}</a></li>
              {{ end }}
          </menu>
      </footer>
  </div>

	{{ partial "footer" . }}
	
	<script type="text/javascript" src="/js/nav.js"></script>
	
</body>
</html>
